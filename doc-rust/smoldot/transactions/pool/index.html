<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="General-purpose transactions pool."><title>smoldot::transactions::pool - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="smoldot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0 (90c541806 2023-05-31)" data-search-js="search-e077946657036a58.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../../static.files/main-f61008743c98d196.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../smoldot/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../smoldot/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module pool</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">smoldot</a>::<wbr><a href="../index.html">transactions</a>::<wbr><a class="mod" href="#">pool</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/smoldot/transactions/pool.rs.html#18-644">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>General-purpose transactions pool.</p>
<p>The transactions pool is a complex data structure that holds a list of pending transactions,
in other words transactions that should later be included in blocks, and a list of
transactions that have been included in non-finalized blocks.</p>
<p>See the <a href="..">parent module’s documentation</a> for an overview of transactions.</p>
<h2 id="overview"><a href="#overview">Overview</a></h2>
<p>The transactions pool stores a list of transactions that the local node desires to include in
blocks, and a list of transactions that have already been included in blocks. Each of these
transactions is either validated or not. A transaction in a block is assumed to always succeed
validation. A validated transaction that isn’t present in any block is a transaction that is
assumed to be includable in a block in the future.</p>
<p>The order in which transactions can be included in a block follows a complex system of
“provided” and “required” tags. A transaction that <em>requires</em> some tags can only be included
after all these tags have been <em>provided</em> by transactions earlier in the chain.</p>
<p>The transactions pool isn’t only about deciding which transactions to include in a block when
authoring, but also about tracking the status of interesting transactions between the moment
they become interesting and the moment the block they are included in becomes finalized. This
is relevant both if the local node can potentially author blocks or not.</p>
<p>The transactions pool tracks the height of the <em>best</em> chain, and only of the best chain. More
precisely, it is aware of the height of the current best block. Forks are tracked.</p>
<h2 id="usage"><a href="#usage">Usage</a></h2>
<p>A <a href="struct.Pool.html" title="struct smoldot::transactions::pool::Pool"><code>Pool</code></a> is a collection of transactions. Each transaction in the pool exposes three
properties:</p>
<ul>
<li>Whether or not it has been validated, and if yes, the block against which it has been
validated and the characteristics of the transaction (as provided by the runtime): the tags it
provides and requires, its longevity, and its priority. See <a href="../validate">the <code>validate</code> module</a>
for more information.</li>
<li>The height of the block, if any, in which the transaction has been included.</li>
<li>A so-called user data, an opaque field controller by the API user.</li>
</ul>
<p>Use <a href="struct.Pool.html#method.add_unvalidated" title="method smoldot::transactions::pool::Pool::add_unvalidated"><code>Pool::add_unvalidated</code></a> to add to the pool a transaction that should be included in a
block at a later point in time.</p>
<p>Use <a href="struct.Pool.html#method.append_block" title="method smoldot::transactions::pool::Pool::append_block"><code>Pool::append_block</code></a> and <a href="struct.Pool.html#method.retract_blocks" title="method smoldot::transactions::pool::Pool::retract_blocks"><code>Pool::retract_blocks</code></a> when a new block is considered as
best in order to let the <a href="struct.Pool.html" title="struct smoldot::transactions::pool::Pool"><code>Pool</code></a> track the state of the best block of the chain. The
block bodies that are passed to <a href="struct.Pool.html#method.append_block" title="method smoldot::transactions::pool::Pool::append_block"><code>Pool::append_block</code></a> are added to the pool.</p>
<p>Use <a href="struct.Pool.html#method.unvalidated_transactions" title="method smoldot::transactions::pool::Pool::unvalidated_transactions"><code>Pool::unvalidated_transactions</code></a> to obtain the list of transactions that should be
validated. Validation should be performed using the <a href="../validate"><code>validate</code></a> module, and
the result reported with <a href="struct.Pool.html#method.set_validation_result" title="method smoldot::transactions::pool::Pool::set_validation_result"><code>Pool::set_validation_result</code></a>.</p>
<p>Use <a href="struct.Pool.html#method.remove_included" title="method smoldot::transactions::pool::Pool::remove_included"><code>Pool::remove_included</code></a> when a block has been finalized to remove from the pool the
transactions that are present in the finalized block and below.</p>
<h2 id="out-of-scope"><a href="#out-of-scope">Out of scope</a></h2>
<p>The following are examples of things that are related transactions pool to but out of scope of
this data structure:</p>
<ul>
<li>Watching the state of transactions.</li>
<li>Sending transactions to other peers.</li>
</ul>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AppendBlock.html" title="struct smoldot::transactions::pool::AppendBlock">AppendBlock</a></div><div class="desc docblock-short">Wraps around <a href="struct.Pool.html" title="struct smoldot::transactions::pool::Pool"><code>Pool</code></a> while a new best block is being inserted. See <a href="struct.Pool.html#method.append_block" title="method smoldot::transactions::pool::Pool::append_block"><code>Pool::append_block</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Config.html" title="struct smoldot::transactions::pool::Config">Config</a></div><div class="desc docblock-short">Configuration for <a href="struct.Pool.html#method.new" title="associated function smoldot::transactions::pool::Pool::new"><code>Pool::new</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Pool.html" title="struct smoldot::transactions::pool::Pool">Pool</a></div><div class="desc docblock-short">Data structure containing transactions. See the module-level documentation for more info.</div></li><li><div class="item-name"><a class="struct" href="struct.TransactionId.html" title="struct smoldot::transactions::pool::TransactionId">TransactionId</a></div><div class="desc docblock-short">Identifier of a transaction stored within the <a href="struct.Pool.html" title="struct smoldot::transactions::pool::Pool"><code>Pool</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Vacant.html" title="struct smoldot::transactions::pool::Vacant">Vacant</a></div><div class="desc docblock-short">See <a href="enum.AppendBlockTransaction.html#variant.Unknown" title="variant smoldot::transactions::pool::AppendBlockTransaction::Unknown"><code>AppendBlockTransaction::Unknown</code></a>.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AppendBlockTransaction.html" title="enum smoldot::transactions::pool::AppendBlockTransaction">AppendBlockTransaction</a></div><div class="desc docblock-short">See <a href="struct.AppendBlock.html#method.block_transaction" title="method smoldot::transactions::pool::AppendBlock::block_transaction"><code>AppendBlock::block_transaction</code></a>.</div></li></ul></section></div></main></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Methods that verify whether a block is correct."><title>smoldot::verify - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="smoldot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0 (90c541806 2023-05-31)" data-search-js="search-e077946657036a58.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../static.files/main-f61008743c98d196.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../smoldot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../smoldot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module verify</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">smoldot</a>::<wbr><a class="mod" href="#">verify</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/smoldot/verify.rs.html#18-73">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Methods that verify whether a block is correct.</p>
<h2 id="description"><a href="#description">Description</a></h2>
<p>When a block is received from the network (or any other untrusted source), this block should
first be verified.</p>
<p>Two possibilities are offered:</p>
<ul>
<li>Verifying the authenticity of the block, using only its header and the ancestor blocks’
headers.</li>
<li>Verifying both the validity and authenticity of the block, using.the block’s header and
body, the headers of the ancestors, and storage of its parent.</li>
</ul>
<blockquote>
<p><strong>Note</strong>: The body of a block consists in the list of its extrinsics. An extrinsic is
either an intrinsic (added by the block’s author) or a transaction.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong>: The option of verifying only the authenticity of a block, and not its validity,
is normally for situations where a block’s body or the parent block’s storage is
not known. If the parent storage and the block’s body are known, it is encouraged
that the block’s validity be checked as well.</p>
</blockquote>
<p>Verifying the authenticity of a block consists in verifying the consensus digest logs found
in its header in order to make sure that the author of the block was authorized to produce it.
Whether the block has been correctly crafted isn’t and cannot be verified with only the
header.</p>
<p>Verifying the block’s validity consists, in addition to verifying its header, in <em>executing</em>
the block. This involves calling the <code>BlockBuilder_check_inherents</code> and <code>Core_execute_block</code>
runtime functions, passing as parameter the header and body of the block, and providing access
to the storage of the parent block. The runtime verifies that the header and body are correct.</p>
<h2 id="trust"><a href="#trust">Trust</a></h2>
<p>Verifying only the authenticity of a block, and not its validity, means that the author of
the block is trusted to have generated a correct block.</p>
<p>Situations where the block author had the right to generate a block but created an invalid
block would result in a loss of money for this author, and are therefore most likely the
consequence of a bug (either on the side of the block author or on the side of the local
verification code).</p>
<p>However, if the blocks’ validity isn’t verified, it is possible for a block author to target
a weak implementation by directly connecting to it and announcing invalid blocks directly
to it. Consequently, if blocks are for example used to verify whether a payment has gone
through, it is preferable to wait for blocks to have been finalized.</p>
<p>No matter the validity of a block, keep in mind that a reorg (a “reorganization”) might
happen, and many valid blocks don’t get finalized.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="aura/index.html" title="mod smoldot::verify::aura">aura</a></div><div class="desc docblock-short">AURA consensus.</div></li><li><div class="item-name"><a class="mod" href="babe/index.html" title="mod smoldot::verify::babe">babe</a></div><div class="desc docblock-short">BABE consensus.</div></li><li><div class="item-name"><a class="mod" href="header_body/index.html" title="mod smoldot::verify::header_body">header_body</a></div></li><li><div class="item-name"><a class="mod" href="header_only/index.html" title="mod smoldot::verify::header_only">header_only</a></div></li><li><div class="item-name"><a class="mod" href="inherents/index.html" title="mod smoldot::verify::inherents">inherents</a></div><div class="desc docblock-short">Inherents, together with transactions, form the body of a block.</div></li></ul></section></div></main></body></html>